# ุฏููู ููุฒุฉ ุงูุฏุฑุฏุดุฉ ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ๐ค

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ุฏุฑุฏุดุฉ ุฐูู ุดุงูู ูุณุชุทูุน:
- โ ุงููุตูู ุงููุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช (ูุฑุงุกุฉ ููุท ููุฃูุงู)
- โ ุชุฏููู ุฌููุน ุงูุญุณุงุจุงุช ูุงูุฃุฑุตุฏุฉ ุชููุงุฆููุง
- โ ูุดู ุงูุฃุฎุทุงุก ุงููุญุงุณุจูุฉ ูู ุงูุฏููู ูุงูููุงุชูุฑ
- โ ุงูุชุญูู ูู ุงููุธุงู ุงููุฑูู ูููุญุฏุงุช (ูุทุนุฉ - ุจุงููุฉ - ูุฑุชูู - ุณูุงุช)
- โ ุชุตุญูุญ ุงูุฃุฎุทุงุก ุชููุงุฆููุง
- โ ุชุญููู ุงูุฃุฏุงุก ุงููุงูู
- โ ุชูุฏูู ุงูุชุฑุงุญุงุช ุฐููุฉ ููุชุญุณูู

---

## ุงููููุงุช ุงูููุดุฃุฉ

### 1. ุฎุฏูุฉ ุงูุฏุฑุฏุดุฉ ุงูุฐููุฉ
**ุงูููู:** `lib/services/ai_chat_service.dart`

ุฎุฏูุฉ ูููุตูุฉ ุชูุงููุง ุนู `database_service.dart` ูุณูููุฉ ุงูุตูุงูุฉ ูุงูุชุทููุฑ.

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:**

#### ุฃ) ุชุฏููู ุงูุฏููู (`_auditAllDebts`)
- ููุฑุฃ ุฌููุน ุณุฌูุงุช ุงูุฏููู
- ูุญุณุจ ุงูุฑุตูุฏ ุงููุนูู ูู ุงููุนุงููุงุช
- ููุงุฑู ูุน ุงูุฑุตูุฏ ุงููุนุฑูุถ
- ููุชุดู ุฃู ุงุฎุชูุงูุงุช ููุจูุบ ุนููุง ุจุฏูุฉ

**ูุซุงู ุนูู ุงูุฅุฎุฑุงุฌ:**
```
โ ุฎุทุฃ ูู ุญุณุงุจ: ูุญูุฏ ุฃุญูุฏ
   ุงูุฑุตูุฏ ุงููุนุฑูุถ: 1,000,000 ุฏููุงุฑ
   ุงูุฑุตูุฏ ุงูุตุญูุญ: 500,000 ุฏููุงุฑ
   ุงููุฑู: 500,000 ุฏููุงุฑ
```

#### ุจ) ุชุฏููู ุงูููุงุชูุฑ (`_auditAllInvoices`)
- ููุญุต ุฌููุน ุงูููุงุชูุฑ
- ูุญุณุจ ุงููุฌููุน ูู ุงูุนูุงุตุฑ
- ููุชุดู ุฃู ุฃุฎุทุงุก ูู ุงูุญุณุงุจุงุช

#### ุฌ) ุชุฏููู ุงููุฎุฒูู (`_auditInventoryHierarchy`)
- ูุชุญูู ูู ุงููุธุงู ุงููุฑูู: ูุทุนุฉ โ ุจุงููุฉ โ ูุฑุชูู โ ุณูุงุช
- ูุญุณุจ ุฅุฌูุงูู ุงููุทุน ูู ุฌููุน ุงููุญุฏุงุช
- ููุชุดู ุฃู ุชูุงูุถุงุช ูู ุงูุญุณุงุจุงุช

**ูุซุงู:**
```
โ ุฎุทุฃ ูู ุญุณุงุจ ุงููุฎุฒูู: ุจูุจุณู 330ูู
   ุงููุทุน ุงููุนุฑูุถุฉ: 1000
   ุงููุทุน ุงููุญุณูุจุฉ: 1200
   (ุณูุงุช: 1ุ ูุฑุชูู: 2ุ ุจุงููุฉ: 3ุ ูุทุนุฉ: 10)
```

#### ุฏ) ุชุตุญูุญ ุชููุงุฆู (`autoFixDebtErrors`, `autoFixInvoiceErrors`, `recalculateInventory`)
- ูุตุญุญ ุงูุฃุฎุทุงุก ุงูููุชุดูุฉ ุชููุงุฆููุง
- ูุญุฏุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูููู ุงูุตุญูุญุฉ
- ูุจูุบ ุนู ุนุฏุฏ ุงูุณุฌูุงุช ุงููุตุญุญุฉ

#### ูู) ุชุญููู ุงูุฃุฏุงุก ุงููุงูู (`analyzeFinancialPerformance`)
- ูุจูุนุงุช ุงูุดูุฑ ุงูุญุงูู ููุงุจู ุงูุดูุฑ ุงูุณุงุจู
- ูุณุจุฉ ุงูููู
- ุฅุฌูุงูู ุงูุฏููู
- ูููุฉ ุงููุฎุฒูู
- ุฑุคู ุฐููุฉ ุนู ุงูุฃุฏุงุก

#### ู) ุงูุชุฑุงุญุงุช ุฐููุฉ (`getSmartRecommendations`)
- ูุดู ุงูุจุถุงุฆุน ุงูุฑุงูุฏุฉ (+90 ููู)
- ุชูุจูู ููุฏููู ุงููุชุฃุฎุฑุฉ (+30 ููู)
- ุชุญุฏูุฏ ุงูููุชุฌุงุช ุงูุฃูุซุฑ ูุจูุนูุง
- ุชูุจูู ูููุฎุฒูู ุงูููุฎูุถ

---

### 2. ูุงุฌูุฉ ุงูุฏุฑุฏุดุฉ
**ุงูููู:** `lib/screens/ai_chat_screen.dart`

ูุงุฌูุฉ ูุณุชุฎุฏู ุนุฑุจูุฉ ูุงููุฉ ูุน:
- ๐ฌ ูุงูุฐุฉ ุฏุฑุฏุดุฉ ุชูุงุนููุฉ
- ๐ ุงูุชุฑุงุญุงุช ุณุฑูุนุฉ ูุงุจูุฉ ููุถุบุท
- ๐จ ุฃููุงู ูููุฒุฉ ุญุณุจ ุญุงูุฉ ุงูุฑุฏ (ูุฌุงุญ/ุชุญุฐูุฑ/ุฎุทุฃ)
- ๐ฑ ุชุตููู ูุชุฌุงูุจ

---

## ุงูุงูุชุฑุงุญุงุช ุงูุณุฑูุนุฉ ุงูุงูุชุฑุงุถูุฉ

ุนูุฏ ูุชุญ ุงูุฏุฑุฏุดุฉุ ูุธูุฑ ูููุณุชุฎุฏู:

1. **"ุชุฏููู ุฌููุน ุฃุฑุตุฏุฉ ุงูุฏููู"** - ูุญุต ุดุงูู ููู ุงูุญุณุงุจุงุช
2. **"ูุญุต ุตุญุฉ ุงูููุงุชูุฑ"** - ุงูุชุญูู ูู ูุฌุงููุน ุงูููุงุชูุฑ
3. **"ุงูุชุญูู ูู ุงููุฎุฒูู ูุงููุญุฏุงุช"** - ุชุฏููู ุงููุธุงู ุงููุฑูู
4. **"ููุฎุต ูุจูุนุงุช ูุฐุง ุงูุดูุฑ"** - ุชูุฑูุฑ ุงููุจูุนุงุช
5. **"ูุดู ุงูุฃุฎุทุงุก ุงููุญุงุณุจูุฉ"** - ูุญุต ุดุงูู ูููุธุงู
6. **"ุฃุนูู 10 ุนููุงุก"** - ูุงุฆูุฉ ุจุฃูุจุฑ ุงูุนููุงุก
7. **"ุงูุจุถุงุฆุน ุงูุฑุงูุฏุฉ"** - ููุชุฌุงุช ูู ุชุชุญุฑู ููุฐ ูุชุฑุฉ
8. **"ุชูุฑูุฑ ุฃุฑุจุงุญ ุงูุณูุฉ"** - ููุฎุต ุงูุฃุฑุจุงุญ

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ:
1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุฏุฑุฏุดุฉ ๐ฌ ูู ุดุฑูุท ุงูุชุทุจูู ุงูุนููู
2. ุงุฎุชุฑ ูู ุงูุงูุชุฑุงุญุงุช ุงูุณุฑูุนุฉ ุฃู ุงูุชุจ ุทูุจู
3. ุงูุชุธุฑ ุงูุชุญููู ูุงููุชุงุฆุฌ

### ุฃูุซูุฉ ุนูู ุงูุฃูุงูุฑ:

**ุชุฏููู:**
- "ุชุฏููู ุฌููุน ุฃุฑุตุฏุฉ ุงูุฏููู"
- "ูุญุต ุงูููุงุชูุฑ"
- "ุชุญูู ูู ุงููุฎุฒูู"

**ุชุตุญูุญ:**
- "ุชุตุญูุญ ุฃุฎุทุงุก ุงูุฏููู"
- "ุฅุตูุงุญ ุงูููุงุชูุฑ"
- "ุฅุนุงุฏุฉ ุญุณุงุจ ุงููุฎุฒูู"

**ุชุญููู:**
- "ุชุญููู ุงูุฃุฏุงุก ุงููุงูู"
- "ููุฎุต ุงููุจูุนุงุช"
- "ุฃุนูู ุงูุนููุงุก"

**ุงูุชุฑุงุญุงุช:**
- "ุงูุชุฑุงุญุงุช ููุชุญุณูู"
- "ุงูุจุถุงุฆุน ุงูุฑุงูุฏุฉ"

**ุจุญุซ:**
- "ุงุจุญุซ ุนู ูุญูุฏ"
- "ุฃูู ููุชุฌ ุจูุจุณู"

---

## ุงูุจููุฉ ุงูุชูููุฉ

### ูููุฐุฌ ุงูุจูุงูุงุช

#### `UserIntent`
```dart
class UserIntent {
  final String action;           // ุงูุฅุฌุฑุงุก ุงููุทููุจ
  final Map<String, dynamic> params;  // ุงููุนุงููุงุช
}
```

#### `ChatResponse`
```dart
class ChatResponse {
  final String text;              // ุงููุต ุงููุนุฑูุถ ูููุณุชุฎุฏู
  final List<String> followups;   // ุงูุชุฑุงุญุงุช ุงููุชุงุจุนุฉ
  final String status;            // success/warning/error
  final Map<String, dynamic>? data;  // ุจูุงูุงุช ุฅุถุงููุฉ
}
```

#### `ChatMessage`
```dart
class ChatMessage {
  final String text;
  final bool isUser;              // ุฑุณุงูุฉ ูู ุงููุณุชุฎุฏู ุฃู ุงูุฐูุงุก
  final List<String> suggestions; // ุงูุงูุชุฑุงุญุงุช
  final String status;
  final Map<String, dynamic>? data;
}
```

---

## ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### โ ูุง ูุณุชุทูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุนูู:
- ูุฑุงุกุฉ ุฌููุน ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุญููู ุงูุจูุงูุงุช ููุดู ุงูุฃุฎุทุงุก
- ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุญุณุงุจูุฉ (ุชุญุฏูุซ ุงูุฃุฑุตุฏุฉ ูุงููุฌุงููุน)
- ุฅูุดุงุก ุงูุชูุงุฑูุฑ ูุงูููุฎุตุงุช

### โ ูุง ูุง ูุณุชุทูุน ูุนูู:
- ุญุฐู ุงูุจูุงูุงุช
- ุชุนุฏูู ุงููุนุงููุงุช ุงูุฃุตููุฉ
- ุงููุตูู ูุจูุงูุงุช ุญุณุงุณุฉ ุฎุงุฑุฌ ุงููุธุงู

---

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ููุฒุงุช ููุชุฑุญุฉ:

1. **ุงุณุชุฎุฑุงุฌ ูู ุงูุตูุฑ (OCR)**
   - ุฑูุน ุตูุฑุฉ ูุงุชูุฑุฉ
   - ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุชููุงุฆููุง
   - ุญูุธูุง ูู ุงููุธุงู

2. **ุชูุงุฑูุฑ PDF**
   - ุฅูุดุงุก ุชูุงุฑูุฑ ูุงุจูุฉ ููุชูุฒูู
   - ุชุตุฏูุฑ ุงูุชุญูููุงุช

3. **ุชูุจููุงุช ุงุณุชุจุงููุฉ**
   - ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ุนูุฏ ุงูุชุดุงู ุฃุฎุทุงุก
   - ุชุฐููุฑ ุจุงูุฏููู ุงููุชุฃุฎุฑุฉ

4. **ุชูุงูู ูุน Groq API**
   - ุงุณุชุฎุฏุงู ููุงุฐุฌ ูุบููุฉ ูุชูุฏูุฉ
   - ููู ุฃูุถู ููุฃูุงูุฑ ุงููุนูุฏุฉ

5. **ุชุญูููุงุช ูุชูุฏูุฉ**
   - ุชููุน ุงููุจูุนุงุช
   - ุงูุชุฑุงุญุงุช ุงูุทูุจุงุช
   - ุชุญููู ุณููู ุงูุนููุงุก

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูุธูุฑ ุฒุฑ ุงูุฏุฑุฏุดุฉ
**ุงูุญู:** ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงููุณุงุฑ ูู `main.dart`:
```dart
'/ai_chat': (context) => const AIChatScreen(),
```

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุญู:** ุชุญูู ูู ุชููุฆุฉ `DatabaseService.instance`

### ุงููุดููุฉ: ุงูุงูุชุฑุงุญุงุช ูุง ุชุนูู
**ุงูุญู:** ุชุฃูุฏ ูู ุชูุฑูุฑ `conversationHistory` ูู `processMessage`

---

## ุงูุตูุงูุฉ

### ุฅุถุงูุฉ ูุธููุฉ ุฌุฏูุฏุฉ:

1. ุฃุถู ุงููุธููุฉ ูู `ai_chat_service.dart`
2. ุฃุถู `action` ุฌุฏูุฏ ูู `_analyzeIntent`
3. ุฃุถู `case` ูู `switch` ูู `processMessage`
4. ุฃุถู ุงูุชุฑุงุญ ุณุฑูุน ูู `defaultSuggestions` ุฅุฐุง ูุฒู

### ุชุนุฏูู ุงูุงูุชุฑุงุญุงุช:
ุนุฏูู ูุงุฆูุฉ `defaultSuggestions` ูู `AIChatService`

### ุชุฎุตูุต ุงูุฃููุงู:
ุนุฏูู ุฏุงูุฉ `_getStatusColor` ูู `AIChatScreen`

---

## ุงูุฎูุงุตุฉ

ุชู ุฅูุดุงุก ูุธุงู ุฏุฑุฏุดุฉ ุฐูู ูุชูุงูู ูุนูู ููุฏูู ูุญุงุณุจู ุดุงูู ููุชุทุจูู. ุงููุธุงู:
- โ ูููุตู ุชูุงููุง ุนู ุฎุฏูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุณูู ุงูุตูุงูุฉ ูุงูุชุทููุฑ
- โ ููุชุดู ุงูุฃุฎุทุงุก ุจุฏูุฉ ุนุงููุฉ
- โ ููุฏู ุญููู ุชููุงุฆูุฉ
- โ ูุงุฌูุฉ ุนุฑุจูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐**
