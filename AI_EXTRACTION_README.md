# ูุธุงู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุชูุฏู ูุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ูู ุตูุฑ ุงูููุงุชูุฑ ูุณูุฏุงุช ุงููุจุถ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุน ูุธุงู **Fallback** ุฐูู.

---

## ๐ฏ ุขููุฉ ุงูุนูู

### **ุงูุฃููููุฉ ูู ุงููุนุงูุฌุฉ:**

```
1๏ธโฃ ุงููุญุงููุฉ ุงูุฃููู: Groq API
   โ
   โ ูุฌุญุ โ ุงุณุชุฎุฏู ุงููุชูุฌุฉ
   โ ูุดูุ โ ุงูุชูู ููุฎุทูุฉ 2

2๏ธโฃ ุงููุญุงููุฉ ุงูุซุงููุฉ: Gemini API (Fallback)
   โ
   โ ูุฌุญุ โ ุงุณุชุฎุฏู ุงููุชูุฌุฉ
   โ ูุดูุ โ ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
```

---

## ๐ ุฅุนุฏุงุฏ API Keys

### ูู ููู `.env`:

```env
# Groq API (ุงูุฃููููุฉ ุงูุฃููู)
GROQ_API_KEY=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

# Gemini API (ุฎุทุฉ ุงุญุชูุงุทูุฉ)
GEMINI_API_KEY=AIzaSyDXq63SxQ6SZXqcNNkNcDXgstGrmBcVJsk
```

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. `lib/services/groq_service.dart`
ุฎุฏูุฉ Groq API ููุนุงูุฌุฉ ุงูุตูุฑ ุจุงุณุชุฎุฏุงู ูููุฐุฌ `llama-3.2-90b-vision-preview`

**ุงููููุฒุงุช:**
- ุฏุนู ุงูุตูุฑ (PNG, JPG, JPEG)
- ุฏุนู PDF
- ุงุณุชุฎุฑุงุฌ JSON ููุธู
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ุนูุฏ ุงููุดู

### 2. `lib/services/ai_extraction_service.dart`
ุฎุฏูุฉ ููุญุฏุฉ ุชุฌูุน ุจูู Groq ู Gemini

**ุงููููุฒุงุช:**
- ูุธุงู Fallback ุฐูู
- ุณุฌูุงุช ุชูุตูููุฉ (Logging)
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุชูุฏูุฉ
- ุฅุฑุฌุงุน ูุนูููุงุช ุนู ุงููุตุฏุฑ ุงููุณุชุฎุฏู

---

## ๐ ุงูุชุนุฏููุงุช ุนูู ุงููููุงุช ุงูููุฌูุฏุฉ

### 1. `lib/screens/ai_import_review_screen.dart`
- ุชู ุงุณุชุจุฏุงู `GeminiService` ุจู `AIExtractionService`
- ุชู ุชุญุฏูุซ ุงููุนุงููุงุช ููุจูู ููุง ุงูููุชุงุญูู

### 2. `lib/screens/supplier_details_screen.dart`
- ุชู ุชุญุฏูุซ `_onAddByAI()` ูุชูุฑูุฑ ููุง ุงูููุชุงุญูู
- ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ

### 3. `lib/screens/suppliers_list_screen.dart`
- ุชู ุชุญุฏูุซ `_pickFileAndOpenAI()` ูุชูุฑูุฑ ููุง ุงูููุชุงุญูู
- ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ

---

## ๐จ ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู

```dart
final service = AIExtractionService(
  groqApiKey: dotenv.env['GROQ_API_KEY'] ?? '',
  geminiApiKey: dotenv.env['GEMINI_API_KEY'] ?? '',
);

final result = await service.extractInvoiceOrReceiptStructured(
  fileBytes: imageBytes,
  fileMimeType: 'image/jpeg',
  extractType: 'invoice', // ุฃู 'receipt'
);

if (result.success) {
  print('ุชู ุงูุงุณุชุฎุฑุงุฌ ุจูุฌุงุญ ูู: ${result.source}');
  print('ุงูุจูุงูุงุช: ${result.data}');
} else {
  print('ูุดู ุงูุงุณุชุฎุฑุงุฌ: ${result.error}');
}
```

---

## ๐ ุงูุณุฌูุงุช (Logs)

ุงููุธุงู ูุทุจุน ุณุฌูุงุช ุชูุตูููุฉ ูู Console:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ค ุจุฏุก ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ูู ุงูุตูุฑุฉ
๐ ููุน ุงูููู: image/jpeg
๐ ููุน ุงูุงุณุชุฎุฑุงุฌ: invoice
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ต ุงููุญุงููุฉ 1: ุงุณุชุฎุฏุงู Groq API...
โ ูุฌุญ Groq! ุชู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุจูุฌุงุญ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก Groq ุงููุชููุนุฉ:
- **429**: ุชุฌุงูุฒ ุงูุญุตุฉ (Rate Limit)
- **401/403**: ูุดููุฉ ูู ุงููุตุงุฏูุฉ
- **400**: ุทูุจ ุบูุฑ ุตุงูุญ (ููุน ููู ุบูุฑ ูุฏุนูู)
- **500/502/503/504**: ุฃุฎุทุงุก ุงูุฎุงุฏู

### ุฃุฎุทุงุก Gemini ุงููุชููุนุฉ:
- **429**: ุชุฌุงูุฒ ุงูุญุตุฉ
- **503**: ุงูุฎุฏูุฉ ุบูุฑ ูุชุงุญุฉ ูุคูุชุงู

---

## ๐ ุงููุฒุงูุง

1. โ **ููุซูููุฉ ุนุงููุฉ**: ูุธุงู Fallback ูุถูู ูุฌุงุญ ุงูุนูููุฉ
2. โ **ุฃุฏุงุก ุฃูุถู**: Groq ุฃุณุฑุน ูู Gemini
3. โ **ุชูููุฑ ุงูุชูููุฉ**: ุงุณุชุฎุฏุงู Groq ุงููุฌุงูู ุฃููุงู
4. โ **ุณุฌูุงุช ูุงุถุญุฉ**: ุชุชุจุน ุณูู ููุนูููุงุช
5. โ **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุฐููุฉ**: ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ

---

## ๐ ููุงุญุธุงุช

- ูููู ุชุนุทูู ุฃุญุฏ ุงูู APIs ุจุชุฑู ุงูููุชุงุญ ูุงุฑุบุงู
- ุฅุฐุง ูุงู ููุง ุงูููุชุงุญูู ูุงุฑุบููุ ุณูุธูุฑ ุฎุทุฃ ูููุณุชุฎุฏู
- ุงููุธุงู ูุฏุนู PDF ูุงูุตูุฑ (PNG, JPG, JPEG)
- ูุชู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุจุตูุบุฉ JSON ููุธูุฉ

---

## ๐ง ุงูุตูุงูุฉ

### ูุฅุถุงูุฉ API ุฌุฏูุฏ:
1. ุฃูุดุฆ ุฎุฏูุฉ ุฌุฏูุฏุฉ ูู `lib/services/`
2. ุฃุถู ุงููุญุงููุฉ ูู `AIExtractionService`
3. ุญุฏูุซ ุชุฑุชูุจ ุงูุฃููููุฉ ุญุณุจ ุงูุญุงุฌุฉ

### ูุชุบููุฑ ุงูุฃููููุฉ:
ุนุฏูู ุชุฑุชูุจ ุงููุญุงููุงุช ูู `ai_extraction_service.dart`

---

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:
1. ุชุญูู ูู ุตุญุฉ API Keys ูู `.env`
2. ุฑุงุฌุน ุงูุณุฌูุงุช ูู Console
3. ุชุฃูุฏ ูู ููุน ุงูููู ุงููุฏุนูู
4. ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** Kiro AI Assistant
**ุงูุชุงุฑูุฎ:** 2025-11-25
